{"version":3,"sources":["maidenhead.js"],"names":[],"mappings":"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","file":"maidenhead-compiled.js","sourcesContent":["\"use strict\";\nexport class Maidenhead {\n    constructor(lat, lon, precision = 5){\n        this.lat = lat;\n        this.lon = lon;\n        this.precision = precision;\n    }\n\n    static valid(mlocation){\n        if (typeof mlocation !== 'string') {\n            return false;\n        }\n\n        if (mlocation.length < 2) {\n            return false;\n        }\n\n        if ((mlocation.length % 2) !== 0) {\n            return false;\n        }\n\n        var length = mlocation.length / 2;\n\n        for (var counter=0; counter<length;i++){\n            var grid = mlocation.substr(counter*2,2);\n\n            if (counter == 0){\n                if (grid.match(/[a-rA-R]{2}/) == null) {\n                    return false;\n                }\n\n            } else if ((counter % 2) == 0) {\n                if (grid.match(/[a-xA-X]{2}/) == null) {\n                    return false;\n                }\n            } else {\n                if (grid.match(/[0-9]{2}/) == null) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n\n    static toLatLon(mlocation){\n        var maidenhead = new Maidenhead();\n        maidenhead.locator = mlocation;\n\n        return [maidenhead.lat, maidenhead.lon];\n    }\n\n    get lat(){\n        return parseFloat(this._lat.toPrecision(6));\n    }\n\n    set lat(pos){\n        this._lat = this._range_check(\"lat\", 90.0, pos)\n    }\n\n    get lon(){\n        return parseFloat(this._lon.toPrecision(6));\n    }\n\n    set lon(pos){\n        this._lon = this._range_check(\"lon\", 180.0, pos)\n    }\n\n    set locator(mlocation){\n        if (!Maidenhead.valid(mlocation)) {\n            throw \"Location is not a valid Maidenhead Locator System string\";\n        }\n\n        this._locator = mlocation;\n        this._lat = -90.00;\n        this._lon = -180.00;\n\n        this._pad_locator();\n\n        this._convert_part_to_latlon(0, 1);\n        this._convert_part_to_latlon(1, 10);\n        this._convert_part_to_latlon(2, 10 * 24);\n        this._convert_part_to_latlon(3, 10 * 24 * 10);\n        this._convert_part_to_latlon(4, 10 * 24 * 10 * 24);\n    }\n\n    get locator(){\n        this._locator = '';\n        this.__lat = this.lat + 90.0;\n        this.__lon = this.lon + 180.0;\n        this.__precision = this.precision;\n\n\n        this._calculate_field();\n        this._calculate_values();\n\n        return this._locator;\n    }\n\n\n    _pad_locator(){\n        var length = this._locator.length / 2 ;\n\n        while (length < 5) {\n            if ((length%2) == 1) {\n                this._locator += '55';\n            }\n            else {\n                this._locator += 'LL';\n            }\n\n            length = this._locator.length / 2;\n        }\n    }\n\n    _range_check(target, range, pos) {\n        pos = Number(pos);\n        if (pos < -range || pos > range){\n            throw target + \" must be between -\" + range + \" and +\" + range;\n        }\n\n        return pos;\n    }\n\n    _convert_part_to_latlon(counter, divisor) {\n        var grid_lon = this._locator.substr(counter*2, 1);\n        var grid_lat = this._locator.substr(counter*2+1, 1);\n\n        this._lat += this._l2n(grid_lat) * 10.0 / divisor;\n        this._lon += this._l2n(grid_lon) * 20.0 / divisor;\n    }\n\n    _calculate_field(){\n        this.__lat = (this.__lat/10) + 0.0000001;\n        this.__lon = (this.__lon/20) + 0.0000001;\n        this._locator += this._n2l(Math.floor(this.__lon)).toUpperCase() + this._n2l(Math.floor(this.__lat)).toUpperCase();\n        this.__precision -= 1;\n    }\n\n    _calculate_values(){\n        for (let counter=0; counter < this.__precision;counter++) {\n            if((counter%2) == 0) {\n                this._compute_locator(counter, 10);\n            } else {\n                this._compute_locator(counter, 24);\n            }\n        }\n    }\n\n    _compute_locator(counter, divisor){\n        this.__lat = (this.__lat - Math.floor(this.__lat)) * divisor;\n        this.__lon = (this.__lon - Math.floor(this.__lon)) * divisor;\n\n        if ((counter%2) == 0) {\n            this._locator += \"\" + Math.floor(this.__lon) + \"\" + Math.floor(this.__lat)\n        } else {\n            this._locator += this._n2l(Math.floor(this.__lon)) + this._n2l(Math.floor(this.__lat))\n        }\n    }\n\n    _l2n(letter){\n        if (letter.match(/[0-9]+/)) {\n            return parseInt(letter);\n        }else{\n            return letter.toLowerCase().charCodeAt(0) - 97;\n        }\n\n    }\n    _n2l(number){\n        return String.fromCharCode(97 + number);\n    }\n}"]}